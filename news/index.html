<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>News | Fountain Lake Arkansas Network</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body>

<main id="article">Loading articleâ€¦</main>

<script>
const parts = location.pathname.split("/").filter(Boolean);
const slug = parts[parts.length - 1];
const el = document.getElementById("article");

fetch("https://cms.fountainlake.net/graphql", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({
    query: `
      query GetNewsItem {
        newsItems(where: { slug: "${slug}" }, first: 1) {
          nodes {
            title
            content
          }
        }
      }
    `
  })
})
.then(res => res.json())
.then(res => {
  console.log("GraphQL response:", res);

  if (res.errors) {
    el.innerHTML = "<pre style='color:#f87171'>" + JSON.stringify(res.errors, null, 2) + "</pre>";
    return;
  }

  const item = res.data?.newsItems?.nodes?.[0];

  if (!item) {
    el.innerHTML = "<h1>Article not found</h1>";
    return;
  }

  el.innerHTML = `
    <article>
      <h1>${item.title}</h1>
      ${item.content}
    </article>
  `;
})
.catch(err => {
  el.innerHTML = "<pre style='color:#f87171'>" + err + "</pre>";
});
</script>


</body>
</html>
